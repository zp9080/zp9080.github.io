<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="路由器环境配置"><meta itemprop=description content="集中一点,登峰造极"><meta name=description content="集中一点,登峰造极"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://zp9080.github.io/imgs/author.png"><meta itemprop=keywords content="IOT"><meta property="og:type" content="article"><meta property="og:title" content="路由器环境配置"><meta property="og:description" content="集中一点,登峰造极"><meta property="og:image" content="/imgs/author.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://zp9080.github.io/post/iot/%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"><meta property="og:site_name" content="f1ow-blog"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="f1ow"><meta property="article:published_time" content="2024-09-05 15:24:15 +0800 CST"><meta property="article:modified_time" content="2024-09-05 15:24:15 +0800 CST"><link type=text/css rel=stylesheet href=https://zp9080.github.io/3rd/font-awesome/6.6.0/css/all.min.css><link type=text/css rel=stylesheet href=https://zp9080.github.io/3rd/animate.css/4.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://zp9080.github.io/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href=/css/main.min.bfbac3431de920c11b5b1cafa45029ea1bc93d5d3da50fed4ab6924b4c250360.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE","permalink":"https://zp9080.github.io/post/iot/%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/","title":"路由器环境配置","waline":{"js":[{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"2.15.8"},{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>路由器环境配置 - f1ow-blog</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><div class=overlay></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>f1ow-blog</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>集中一点,登峰造极</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>207</span></a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-categories hvr-icon"></i>分类</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#网桥>网桥</a></li><li><a href=#模板>模板</a></li><li><a href=#其他记录>其他记录</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=f1ow src=/imgs/img-lazy-loading.gif data-src=/imgs/author.png><p class=site-author-name itemprop=name>f1ow</p><div class=site-description itemprop=description>集中一点,登峰造极</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>207</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>38</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>80</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zp9080 title="Github → https://github.com/zp9080" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://v3rdant.cn/ title=https://v3rdant.cn/ target=_blank>v3rdant</a></li><li class=links-of-blogroll-item><a href=https://juicymio.github.io/ title=https://juicymio.github.io/ target=_blank>juicymio</a></li><li class=links-of-blogroll-item><a href=https://ka7arotto.github.io/ title=https://ka7arotto.github.io/ target=_blank>Goku</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=2024-07-28T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=273686></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=660></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2025-02-27T17:57:37+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/zp9080 rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://zp9080.github.io/post/iot/%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/author.png"><meta itemprop=name content="f1ow"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="f1ow"><meta itemprop=description content="集中一点,登峰造极"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="路由器环境配置"><meta itemprop=description content></span><header class=post-header><h1 class=post-title itemprop="name headline">路由器环境配置
<a href=https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name/post/IOT/%e8%b7%af%e7%94%b1%e5%99%a8%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-09-05 15:24:15 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-09-05 15:24:15 +0800 CST">2024-09-05
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/iot itemprop=url rel=index><span itemprop=name>IOT</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2063</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>5分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/iot/%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><h1 id=网桥>网桥
<a class=header-anchor href=#%e7%bd%91%e6%a1%a5></a></h1><p>网桥（Bridge）在网络中类似于一个虚拟的交换机，能够连接多个网络接口，使这些接口位于同一个局域网内，可以相互通信。在虚拟化环境中，网桥常用于将虚拟机的网络接口与主机的网络接口连接起来，从而使虚拟机和主机能够在同一个网络中相互通信。</p><p>网桥相关的概念解释</p><ol><li><p>什么是网桥（Bridge）？
网桥是一个用于连接多个网络接口的设备（或者说是逻辑设备）。通过网桥，多个网络接口可以共享同一个网络，使得这些接口可以像处于同一物理局域网（LAN）中一样互相通信。对于虚拟机环境而言，网桥允许虚拟机通过主机的网络设备访问外部网络或与主机通信。</p></li><li><p>为什么需要网桥？
在虚拟化环境中，例如 QEMU 中，虚拟机默认是隔离的，如果希望虚拟机能够和主机以及外部网络通信，就需要建立一条网络连接。网桥可以实现虚拟机和主机的网络互通，使虚拟机能够使用主机的网络接口，与外部设备通信，或者与其他虚拟机通信。</p></li></ol><p>具体步骤中的网桥配置说明</p><ol><li>安装网络桥接工具</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-bash data-lang=bash><span style=display:flex><span>sudo apt-get install bridge-utils
</span></span></code></pre></div><p>bridge-utils 是管理网桥的工具集，它提供了创建、删除和管理网桥的命令（如 brctl 命令）。</p><ol start=2><li>创建网桥 Virbr0</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-bash data-lang=bash><span style=display:flex><span>sudo brctl addbr Virbr0
</span></span></code></pre></div><p>brctl addbr 是用于创建一个新的网桥的命令。
Virbr0 是你为这个网桥命名的名字（你可以取其他名称，但为了规范和清晰，通常用 Virbr 或 br0 这样的名字）。
网桥的作用：将虚拟机和主机的网络设备（如 tap 设备或物理网卡）连接在一起，让它们处于同一个局域网中。</p><ol start=3><li>为网桥分配 IP 地址并启用</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ifconfig Virbr0 192.168.50.51/24 up
</span></span></code></pre></div><p>ifconfig 是用于配置网络接口的命令。
Virbr0 是刚才创建的网桥接口。
192.168.50.51/24 是为这个网桥分配的 IP 地址（这里假设你的局域网是 192.168.50.x 网段）。
up 表示启用该接口。</p><p>为什么要为网桥分配 IP？
虽然网桥本身不需要参与通信，但如果你想通过主机与虚拟机通信，就需要为网桥分配一个 IP 地址，这样你就可以在主机上通过该 IP 地址与虚拟机通信。</p><ol start=4><li>创建 TAP 接口</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-bash data-lang=bash><span style=display:flex><span>sudo tunctl -t tap0
</span></span></code></pre></div><p>tunctl 用于创建虚拟网络接口，tap0 是你创建的虚拟网络接口的名称。
TAP接口的作用：TAP 接口是一种虚拟网络接口，专门用于虚拟机的网络连接。它模拟了一个网卡设备，虚拟机可以通过这个接口与网桥连接，从而与主机和外部网络通信。</p><ol start=5><li>为 TAP 接口分配 IP 地址</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-bash data-lang=bash><span style=display:flex><span>sudo ifconfig tap0 192.168.50.52/24 up
</span></span></code></pre></div><p>为 tap0 接口分配 IP 地址（比如 192.168.50.52），以便虚拟机通过这个 IP 与主机通信。
tap0 其实是虚拟机的网卡接口，它通过网桥连接到主机网络。</p><ol start=6><li>将 TAP 接口添加到网桥</li></ol><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-bash data-lang=bash><span style=display:flex><span>sudo brctl addif Virbr0 tap0
</span></span></code></pre></div><p>brctl addif 命令用于将一个接口（这里是 tap0）添加到网桥中（这里是 Virbr0）。
作用：将 TAP 接口连接到网桥 Virbr0 上，这样 TAP 接口就可以通过网桥和主机通信。虚拟机通过 tap0 接口连接到网桥，主机通过 Virbr0 接口连接到同一个网桥，二者通过这个网桥通信。</p><p>总结:
网桥（Virbr0）相当于一个虚拟交换机，虚拟机通过 tap0 接口与这个网桥连接，主机则通过网桥 Virbr0 与虚拟机进行网络通信。具体步骤如下：</p><p>创建网桥：将多个网络接口（如 tap0 和主机的网络接口）加入到同一个网桥（Virbr0）中，使它们能够互通。
创建 TAP 接口：TAP 接口是虚拟机的网络接口，它相当于虚拟机的虚拟网卡。
添加 TAP 接口到网桥：将虚拟机的 TAP 接口与网桥连接，使虚拟机通过这个网桥与主机通信。
通过这种方式，虚拟机可以像物理网络设备一样参与到主机的网络中，实现与主机以及外部设备的通信。</p><h1 id=模板>模板
<a class=header-anchor href=#%e6%a8%a1%e6%9d%bf></a></h1><p>Ubuntu16.04操作系统
qemu虚拟机
HG532eV100R001C01B020_upgrade_packet.bin固件
Ghidra逆向分析工具</p><p>1.提取固件
apt-get -y install binwalk #需要提前安装binwalk
binwalk -Me HG532eV100R001C01B020_upgrade_packet.bin #解压后主程序位于squashfs-root/目录下</p><p>2.下载qemu虚拟机
sudo apt-get install -y qemu binfmt-support qemu-user-static</p><p>3.下载镜像
<a href=https://people.debian.org/~aurel32/qemu/ title=https://people.debian.org/~aurel32/qemu/ rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://people.debian.org/~aurel32/qemu/
<i class="fa fa-external-link-alt"></i></a></p><p>wget
<a href=https://people.debian.org/~aurel32/qemu/mips/debian_squeeze_mips_standard.qcow2 title=https://people.debian.org/~aurel32/qemu/mips/debian_squeeze_mips_standard.qcow2 rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://people.debian.org/~aurel32/qemu/mips/debian_squeeze_mips_standard.qcow2
<i class="fa fa-external-link-alt"></i>
</a>wget
<a href=https://people.debian.org/~aurel32/qemu/mipsel/vmlinux-3.2.0-4-4kc-malta title=https://people.debian.org/~aurel32/qemu/mipsel/vmlinux-3.2.0-4-4kc-malta rel="noopener external nofollow noreferrer" target=_blank class=exturl>https://people.debian.org/~aurel32/qemu/mipsel/vmlinux-3.2.0-4-4kc-malta
<i class="fa fa-external-link-alt"></i></a></p><ul><li><p>这个是在linux虚拟机里面创建一个网桥
4.配置网络，创建网桥，实现虚拟机内部和Ubuntu的连接
sudo apt-get install bridge-utils
sudo brctl addbr Virbr0
sudo ifconfig Virbr0 192.168.50.51/24 up</p></li><li><p>这个是在linux虚拟机里面创建tap接口
5.创建tap接口，添加到网桥
sudo apt install uml-utilities
sudo tunctl -t tap0
sudo ifconfig tap0 192.168.50.52/24 up
sudo brctl addif Virbr0 tap0</p></li></ul><p>6.qemu虚拟机配置，账号密码都为root
apt install qemu-system-mips
apt install qemu-system-arm</p><p>#记得到下载的镜像下进行启动
sudo qemu-system-mips -M malta -kernel vmlinux-3.2.0-4-4kc-malta -hda debian_squeeze_mips_standard.qcow2 -append &ldquo;root=/dev/sda1 console=tty0&rdquo; -netdev tap,id=tapnet,ifname=tap0,script=no -device rtl8139,netdev=tapnet -nographic</p><p>#进入qemu虚拟机后，配置ip地址，测试与主机的连通性</p><ul><li>这个是在qemu启动后为eth0分配ip地址，同时测试和虚拟机的连通性
ifconfig eth0 192.168.50.53/24 up
ping 192.168.50.51 -c 3</li></ul><p>7.搭建漏洞环境
#回到linux虚拟机中将squashfs-root文件夹复制到虚拟机，根据提示输入密码root</p><ul><li><p>这个192.168.50.53就是刚才在qemu中为eth0分配的ip地址</p></li><li><p>后来阅读相关文章说是最好传送压缩包，不要直接传送整个文件系统
tar -czvf squashfs-root.tar.gz squashfs-root
scp -r squashfs-root.tar.gz
<a href=mailto:root@192.168.50.53 title=root@192.168.50.53>root@192.168.50.53
</a>:~/
tar -xzvf squashfs-root.tar.gz</p></li><li><p>以下操作都是在qemu虚拟机中
#进入启动的qemu虚拟机，挂载程序文件
mount -o bind /dev ./squashfs-root/dev
mount -t proc /proc ./squashfs-root/proc
#启动shell，注意：这个shell是用来后面改IP地址的，
chroot squashfs-root sh
brctl addbr br0
ifconfig br0 192.168.50.100 up</p></li><li><p>以下操作在linux虚拟机中
#在Ubuntu里面再单独开一个终端，使用ssh连接上去通过ssh启动的终端，启动路由器
ssh
<a href=mailto:root@192.168.50.53 title=root@192.168.50.53>root@192.168.50.53
</a>chroot squashfs-root /bin/sh
./bin/upnp
./bin/mic</p></li></ul><p>#此时的qemu虚拟机的路由IP已经发生了变化，ssh已经断开了，所以需要返回qemu虚拟机的终端进行更改IP地址
ifconfig eth0 192.168.50.53/24 up
ifconfig br0 192.168.50.52/24 up</p><h1 id=其他记录>其他记录
<a class=header-anchor href=#%e5%85%b6%e4%bb%96%e8%ae%b0%e5%bd%95></a></h1><p>ps aux | grep qemu</p><p>./gdbserver 0.0.0.0:7777 ./bin/httpd
gdb-multiarch -q ./bin/httpd
target remote 192.168.50.100:7777</p><p>cp /usr/bin/qemu-arm-static ./
sudo chroot ./ sh
./qemu-arm-static -g 1234 ./bin/httpd</p></div><footer class=post-footer><div class=post-tags><a href=/tags/iot>IOT</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="f1ow - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="f1ow - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
路由器环境配置</li><li class=post-copyright-author><strong>本文作者： </strong>f1ow</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://zp9080.github.io/post/iot/%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/ title=路由器环境配置>https://zp9080.github.io/post/iot/%E8%B7%AF%E7%94%B1%E5%99%A8%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/iot/iot%E5%85%A5%E9%97%A8cve%E5%A4%8D%E7%8E%B0/ rel=next title=IOT入门CVE复现><i class="fa fa-chevron-left"></i> IOT入门CVE复现</a></div><div class="post-nav-prev post-nav-item"><a href=/post/iot/iot%E5%85%A5%E9%97%A8%E5%AD%A6%E4%B9%A0/ rel=prev title=IOT入门学习>IOT入门学习
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2024 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>f1ow</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.6.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>鄂ICP备 20240001号</a>
<img src=/imgs/gongan.png alt=鄂公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42010002002000" target=_blank>鄂公网安备 42010002002000 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel>
</a><a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云>
</a><a target=_blank href=https://github.com title=Github><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/github.svg alt=Github>
</a><span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://zp9080.github.io/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://zp9080.github.io/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://zp9080.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://zp9080.github.io/3rd"}},"version":"4.6.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src=/js/main.min.befa9b7d22ec90da86c74c5dbff5ee42c12e9fc6d6f4448bfcc596cc329b19e8.js defer></script></body></html>